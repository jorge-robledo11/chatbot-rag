backend   |  
backend   |       INFO   Will watch for changes in these directories: ['/app']
backend   |       INFO   Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
backend   |       INFO   Started reloader process [100] using WatchFiles
backend   | 2025-07-14 02:37:48.240 | DEBUG    | backend.src.core.profiler:__init__:64 - Profiler inicializado. Directorio de salida: 'performance'.
backend   | 2025-07-14 02:37:48.640 | INFO     | backend.src.orchestrator.settings.system_prompts:get_faq_file_path:32 - ‚úÖ Archivo FAQ encontrado en: /app/backend/src/orchestrator/docs/faq_examples.json
backend   | 2025-07-14 02:37:48.640 | SUCCESS  | backend.src.orchestrator.settings.system_prompts:load_faq_dict:63 - ‚úÖ FAQ JSON cargado exitosamente desde: /app/backend/src/orchestrator/docs/faq_examples.json
backend   | 2025-07-14 02:37:48.640 | INFO     | backend.src.orchestrator.settings.system_prompts:get_faq_file_path:32 - ‚úÖ Archivo FAQ encontrado en: /app/backend/src/orchestrator/docs/faq_examples.json
backend   | 2025-07-14 02:37:48.640 | SUCCESS  | backend.src.orchestrator.settings.system_prompts:load_faq_examples_markdown:98 - ‚úÖ FAQ Markdown cargado exitosamente desde: /app/backend/src/orchestrator/docs/faq_examples.json
backend   | 2025-07-14 02:37:48.646 | SUCCESS  | backend.config.settings:log_successful_load:72 - ‚úÖ Todas las configuraciones han sido cargadas y validadas con √©xito.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.logging_config:setup_logging:76 - ‚úÖ Logger de Loguru configurado.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.app:<module>:28 - Inicializando configuraci√≥n de logging.
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.app:<module>:30 - ENTORNO AZURE FUNCTIONS: No definido
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.app:<module>:46 - Instancia de FastAPI creada: title='Ajover Chatbot API', version='1.0.0'.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.app:<module>:53 - Configurando logging de endpoints.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.logging_config:setup_logging:76 - ‚úÖ Logger de Loguru configurado.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.logging_config:endpoints_logging:109 - üîß App logger configurado con PropagateHandler.
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.app:<module>:55 - Configuraci√≥n de logging de endpoints completada.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.app:<module>:60 - Configurando documentaci√≥n.
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.core.openapi:documentation_config:63 - Funci√≥n custom_openapi instalada en app.openapi con base relativa '%s'.
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.app:<module>:62 - Configuraci√≥n de documentaci√≥n completada.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.app:<module>:67 - Configurando pol√≠ticas de seguridad.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.policies:add_security_middleware:88 - üè≠ Applying security middleware...
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.policies:add_security_middleware:95 - ‚úÖ Pol√≠ticas de seguridad aplicadas.
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.app:<module>:69 - Configuraci√≥n de pol√≠ticas de seguridad completada.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.app:<module>:74 - Registrando middleware CORS.
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.app:<module>:82 - Middleware CORS registrado.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.app:<module>:87 - Incluyendo routers.
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.app:<module>:92 - üîå ROUTERS REGISTRADOS CORRECTAMENTE. Endpoints disponibles: [Route(path='/openapi.json', name='openapi', methods=['GET', 'HEAD']), APIRoute(path='/', name='api_root', methods=['GET']), APIRoute(path='/docs', name='get_scalar_docs', methods=['GET']), APIRoute(path='/health', name='health_check', methods=['GET']), APIRoute(path='/chat/query', name='process_user_query', methods=['POST']), APIRoute(path='/sessions/', name='create_new_session', methods=['POST']), APIRoute(path='/sessions/{session_id}', name='get_session_by_id', methods=['GET']), APIRoute(path='/sessions/{session_id}/history', name='clear_history', methods=['DELETE']), APIRoute(path='/users/', name='register_user', methods=['POST']), APIRoute(path='/users/{user_id}', name='get_user_by_id', methods=['GET'])]
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.app:<module>:99 - Aplicaci√≥n FastAPI lista. Esperando peticiones...
backend   |       INFO   Started server process [105]
backend   |       INFO   Waiting for application startup.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.logging_config:setup_logging:76 - ‚úÖ Logger de Loguru configurado.
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.lifespan_manager:lifespan:35 - üöÄ Iniciando secuencia de arranque (lifespan)‚Ä¶
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.warm_up:warm_up_app:41 - ü§ñ Warm-up: inicializando agente‚Ä¶
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: initialize_agent
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: initialize_agent
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.orchestrator.settings.agent_factory:initialize_agent:55 - üîß Creando instancia del agente Ajover...
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.orchestrator.settings.agent_factory:initialize_agent:64 - ‚è≥ Loading SearchAI‚Ä¶ (pdf=pdf-index, web=web-index)
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_create_factory
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_create_factory
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.infrastructure.openai:create:110 - üîß Iniciando OpenAI.create()
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.infrastructure.openai:_ensure_settings:86 - üîç Validando configuraci√≥n de OpenAI
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.infrastructure.openai:create:116 - üîë Configuraci√≥n de API key y endpoint encontrada
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.infrastructure.openai:create:125 - ü§ñ‚úÖ Cliente AsyncAzureOpenAI inicializado
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.infrastructure.openai:__init__:59 - üöÄ Inicializando servicio OpenAI: chat='gpt-4o', embeddings='text-embedding-3-small', temp=0.0
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.utils.time_utils:__init__:155 - ü™£ Token bucket 'default' inicializado: rate=1.0/s, capacity=5
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.infrastructure.openai:__init__:68 - ‚úÖ Servicio OpenAI inicializado correctamente
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_create_factory] M√©tricas recogidas: tiempo=0.0115s, cpu=0.00%, memoria_actual=139.71MB, memoria_pico=139.71MB, llamadas=3176
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_create_factory.json
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_create_factory. Tiempo: 0.012s, Memoria pico: 139.71MB, Llamadas: 3176
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_create_factory
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_create_factory
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.infrastructure.searchai:create:95 - üîó‚úÖ Clientes de Azure Search AI inicializados para √≠ndice 'pdf-index'.
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.infrastructure.searchai:__init__:64 - Clientes de Search AI para √≠ndice 'pdf-index' y servicio OpenAI asignados.
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_create_factory] M√©tricas recogidas: tiempo=0.0010s, cpu=0.00%, memoria_actual=139.96MB, memoria_pico=139.71MB, llamadas=876
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_create_factory.json
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_create_factory. Tiempo: 0.001s, Memoria pico: 139.71MB, Llamadas: 876
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:initialize_agent:69 - ‚úÖ SearchAI listos (PDF='pdf-index', WEB='web-index')
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.orchestrator.settings.agent_factory:initialize_agent:72 - ü§ñ Inicializando AzureChatOpenAI‚Ä¶
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:initialize_agent:81 - ‚úÖ Modelo AzureChatOpenAI listo.
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.orchestrator.settings.agent_settings:__init__:60 - ü§ñ Inicializando el agente de Ajover con dependencias inyectadas...
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:__init__:67 - ‚úÖ Agente y grafo compilados con √©xito.
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:initialize_agent:91 - üöÄ Agente Ajover listo para solicitudes.
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [initialize_agent] M√©tricas recogidas: tiempo=0.1837s, cpu=0.00%, memoria_actual=145.78MB, memoria_pico=139.71MB, llamadas=695
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/initialize_agent.json
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: initialize_agent. Tiempo: 0.184s, Memoria pico: 139.71MB, Llamadas: 695
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.warm_up:warm_up_app:49 - üîå Warm-up: creando conexiones externas‚Ä¶
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_create_factory
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_create_factory
backend   | /app/.venv/lib/python3.11/site-packages/motor/core.py:171: UserWarning: You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb
backend   |   delegate = self.__delegate_class__(*args, **kwargs)
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.infrastructure.cosmos_db_sessions:create:106 - üîó‚úÖ CosmosDBSessions listo (DB='ajover-chatbot-db', Coll='session-collection').
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_create_factory] M√©tricas recogidas: tiempo=0.0128s, cpu=0.00%, memoria_actual=147.03MB, memoria_pico=145.78MB, llamadas=2557
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_create_factory.json
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_create_factory. Tiempo: 0.013s, Memoria pico: 145.78MB, Llamadas: 2557
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_users_create_factory
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_users_create_factory
backend   | 2025-07-14 02:37:48 | SUCCESS  | backend.src.infrastructure.cosmos_db_users:create:99 - üîó‚úÖ CosmosDBUsers listo (DB='%s', Coll='%s').
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_users_create_factory] M√©tricas recogidas: tiempo=0.0113s, cpu=0.00%, memoria_actual=147.78MB, memoria_pico=147.03MB, llamadas=1976
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_users_create_factory.json
backend   | 2025-07-14 02:37:48 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_users_create_factory. Tiempo: 0.011s, Memoria pico: 147.03MB, Llamadas: 1976
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.infrastructure.blob_storage:create:61 - Iniciando m√©todo de f√°brica BlobStorage.create().
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.infrastructure.blob_storage:create:77 - Conectando a Azure Blob Service...
backend   | 2025-07-14 02:37:48 | DEBUG    | backend.src.infrastructure.blob_storage:create:80 - Intentando obtener/crear el contenedor: 'documentos-pdf'.
backend   | 2025-07-14 02:37:49 | INFO     | backend.src.infrastructure.blob_storage:create:87 - üì¶‚úÖ Contenedor 'documentos-pdf' ya existe, se usar√° el existente.
backend   | 2025-07-14 02:37:49 | SUCCESS  | backend.src.infrastructure.blob_storage:create:96 - üîó‚úÖ BlobServiceClient inicializado para el contenedor 'documentos-pdf'.
backend   | 2025-07-14 02:37:49 | DEBUG    | backend.src.infrastructure.blob_storage:__init__:40 - Inicializando BlobStorage con contenedor: 'documentos-pdf'.
backend   | 2025-07-14 02:37:49 | SUCCESS  | backend.src.core.warm_up:warm_up_app:81 - ‚úÖ Warm-up completo.
backend   |       INFO   Application startup complete.
frontend  | 172.18.0.1 - - [14/Jul/2025:02:37:51 +0000] "GET / HTTP/1.1" 304 0 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36" "-"
backend   | 2025-07-14 02:37:57 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:37:57 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:37:57 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:37:57 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:37:57 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id=None, query='Hola'
backend   | 2025-07-14 02:37:57 | INFO     | backend.src.routers.chat:process_user_query:74 - Sesi√≥n no encontrada o no proporcionada. Creando nueva...
backend   | 2025-07-14 02:37:57 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_create_session
backend   | 2025-07-14 02:37:57 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_create_session
backend   | 2025-07-14 02:37:59 | SUCCESS  | backend.src.infrastructure.cosmos_db_sessions:create_session:154 - üÜï Sesi√≥n creada id=sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_create_session] M√©tricas recogidas: tiempo=2.0024s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=512
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_create_session.json
backend   | 2025-07-14 02:37:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_create_session. Tiempo: 2.002s, Memoria pico: 154.53MB, Llamadas: 512
backend   | 2025-07-14 02:37:59 | SUCCESS  | backend.src.routers.chat:process_user_query:76 - ‚ú® Nueva sesi√≥n creada: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:37:59.276209-05:00
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0947s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=405
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:37:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.095s, Memoria pico: 154.53MB, Llamadas: 405
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:132 - Historial vac√≠o para session_id=sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0962s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=334
backend   | 2025-07-14 02:37:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:37:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.096s, Memoria pico: 154.53MB, Llamadas: 334
backend   | 2025-07-14 02:38:00 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.8737s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=305
backend   | 2025-07-14 02:38:00 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:38:00 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.874s, Memoria pico: 154.53MB, Llamadas: 305
backend   | 2025-07-14 02:38:00 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (0 msgs)
backend   | 2025-07-14 02:38:00 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:38:00 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'Hola‚Ä¶'
backend   | 2025-07-14 02:38:00 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:38:01 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:38:01 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: '¬°Hola! üòä ¬øEn qu√© puedo ayudarte hoy?‚Ä¶'
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=1.9405s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=365
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:38:01 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 1.940s, Memoria pico: 154.53MB, Llamadas: 365
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:38:01.216363-05:00
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0880s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=264
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:38:01 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.088s, Memoria pico: 154.53MB, Llamadas: 264
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0959s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=405
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:38:01 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.096s, Memoria pico: 154.53MB, Llamadas: 405
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:38:01.311544-05:00
backend   | 2025-07-14 02:38:01 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=4.0418s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=710
backend   | 2025-07-14 02:38:01 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:38:01 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 4.042s, Memoria pico: 154.53MB, Llamadas: 710
backend   | 2025-07-14 02:38:01 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 4045.14ms)
backend   |       INFO   172.18.0.1:35278 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:38:14 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:38:14 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øCu√°les tipos de productos maneja ajover?'
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0824s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=141
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:38:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.082s, Memoria pico: 154.53MB, Llamadas: 141
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:38:14.477449-05:00
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0826s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=405
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:38:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 154.53MB, Llamadas: 405
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (2 mensajes)
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0839s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=334
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:38:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.084s, Memoria pico: 154.53MB, Llamadas: 334
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.1017s, cpu=0.00%, memoria_actual=154.53MB, memoria_pico=154.53MB, llamadas=272
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:38:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.102s, Memoria pico: 154.53MB, Llamadas: 272
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (2 msgs)
backend   | 2025-07-14 02:38:14 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:38:14 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øCu√°les tipos de productos maneja ajover?‚Ä¶'
backend   | 2025-07-14 02:38:14 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:38:17 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:38:17 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:38:17 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_web_search con argumentos: {'query': 'tipos de productos que maneja Ajover', 'query_type': 'general', 'n_docs': 4}
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:89 - üîµ [tool_web_search] Tool invocada. query='tipos de productos que maneja Ajover', query_type='general', n_docs=4
backend   | 2025-07-14 02:38:17 | INFO     | backend.src.orchestrator.tools.web_content:tool_web_search:97 - üü¶ [tool_web_search] Ejecutando b√∫squeda web: 'tipos de productos que maneja Ajover' [type=general, n_docs=4]...
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:38:17 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'tipos de productos que maneja Ajover...'
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=36)
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 5.00 ‚Üí 5.00 tokens (+28.55 en 28.55s)
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:38:17 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.5314s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=154.53MB, llamadas=86363
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:38:17 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.531s, Memoria pico: 154.53MB, Llamadas: 86363
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:38:17 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 4 vecinos m√°s cercanos.
backend   | 2025-07-14 02:38:18 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 4 resultados.
backend   | 2025-07-14 02:38:18 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['ZUtUYDT2QjxBsmyulhQx65frrShi57sSkQHyhmpl', 'i_WL63YUE8fDNa7fjtScbeihpWA3nVoztTvc6nti', 'j1qe5rzu5m92sDtLfZacPwr__O0BXN_1LXBT4Dh5', 'bKEVkmT-yLskP97LJ8As_q9hUh-dMIZR-KMQ3TNt']...
backend   | 2025-07-14 02:38:18 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=1.2615s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=154.53MB, llamadas=583
backend   | 2025-07-14 02:38:18 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:38:18 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 1.262s, Memoria pico: 154.53MB, Llamadas: 583
backend   | 2025-07-14 02:38:18 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:105 - üîµ [tool_web_search] Respuesta raw de SearchAI: [{'content': 'PORTAFOLIO DE \nPRODUCTOS\nTanques y...
backend   | 2025-07-14 02:38:18 | SUCCESS  | backend.src.orchestrator.tools.web_content:tool_web_search:109 - üü¶ [tool_web_search] B√∫squeda web completada. Documentos encontrados: 4
backend   | 2025-07-14 02:38:18 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:26 - üîµ [tool_web_search] Formateando resultados de b√∫squeda web.
backend   | 2025-07-14 02:38:18 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:47 - üîµ [tool_web_search] 4 documentos web formateados.
backend   | 2025-07-14 02:38:18 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:38:24 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:38:24 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Ajover ofrece una amplia ‚Ä¶'
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=9.7865s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=154.53MB, llamadas=362
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:38:24 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 9.786s, Memoria pico: 154.53MB, Llamadas: 362
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:38:24.263817-05:00
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0833s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=405
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:38:24 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.10MB, Llamadas: 405
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:38:24.346743-05:00
backend   | 2025-07-14 02:38:24 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=9.9558s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=154.53MB, llamadas=710
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:38:24 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 9.956s, Memoria pico: 154.53MB, Llamadas: 710
backend   | 2025-07-14 02:38:24 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 9957.41ms)
backend   |       INFO   172.18.0.1:60412 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0886s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=277
backend   | 2025-07-14 02:38:24 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:38:24 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.089s, Memoria pico: 175.10MB, Llamadas: 277
backend   | 2025-07-14 02:39:10 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:39:10 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:39:10 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:39:10 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:39:10 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øCu√°les tipos de tejas tienen?'
backend   | 2025-07-14 02:39:10 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:39:10 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:10 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0833s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=135
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:39:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.10MB, Llamadas: 135
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:39:11.056968-05:00
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0904s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=267
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:39:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.090s, Memoria pico: 175.10MB, Llamadas: 267
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0952s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=405
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:39:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.095s, Memoria pico: 175.10MB, Llamadas: 405
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (5 mensajes)
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0965s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=334
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:39:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.097s, Memoria pico: 175.10MB, Llamadas: 334
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (5 msgs)
backend   | 2025-07-14 02:39:11 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:39:11 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øCu√°les tipos de tejas tienen?‚Ä¶'
backend   | 2025-07-14 02:39:11 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:39:12 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:39:12 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:39:12 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_web_search con argumentos: {'query': 'tipos de tejas Ajover', 'query_type': 'general', 'n_docs': 4}
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:89 - üîµ [tool_web_search] Tool invocada. query='tipos de tejas Ajover', query_type='general', n_docs=4
backend   | 2025-07-14 02:39:12 | INFO     | backend.src.orchestrator.tools.web_content:tool_web_search:97 - üü¶ [tool_web_search] Ejecutando b√∫squeda web: 'tipos de tejas Ajover' [type=general, n_docs=4]...
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:39:12 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'tipos de tejas Ajover...'
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=21)
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+54.92 en 54.92s)
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:39:12 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3656s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=7848
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:39:12 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.366s, Memoria pico: 175.10MB, Llamadas: 7848
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:39:12 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 4 vecinos m√°s cercanos.
backend   | 2025-07-14 02:39:13 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 4 resultados.
backend   | 2025-07-14 02:39:13 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['j1qe5rzu5m92sDtLfZacPwr__O0BXN_1LXBT4Dh5', '6ylgHsNQ8MKItkXlkcJibkREZ8GrJkJZdUgnvICn', 'SPOPYWL-kEvIhLNgkCyDTnluEo5yJ6opmuPAx3Kn', 'g87KMUH4egrH8qySPQRATm1NovcVYATm3y9H2vTl']...
backend   | 2025-07-14 02:39:13 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.9056s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=583
backend   | 2025-07-14 02:39:13 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:39:13 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.906s, Memoria pico: 175.10MB, Llamadas: 583
backend   | 2025-07-14 02:39:13 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:105 - üîµ [tool_web_search] Respuesta raw de SearchAI: [{'content': 'C√≥digo\nUnidades\n Perfil Ajonit\nTr...
backend   | 2025-07-14 02:39:13 | SUCCESS  | backend.src.orchestrator.tools.web_content:tool_web_search:109 - üü¶ [tool_web_search] B√∫squeda web completada. Documentos encontrados: 4
backend   | 2025-07-14 02:39:13 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:26 - üîµ [tool_web_search] Formateando resultados de b√∫squeda web.
backend   | 2025-07-14 02:39:13 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:47 - üîµ [tool_web_search] 4 documentos web formateados.
backend   | 2025-07-14 02:39:13 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:39:17 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:39:17 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Ajover maneja varios tipo‚Ä¶'
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=6.1896s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=365
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:39:17 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 6.190s, Memoria pico: 175.10MB, Llamadas: 365
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:39:17.245951-05:00
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0827s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=405
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:39:17 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.10MB, Llamadas: 405
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:39:17.328769-05:00
backend   | 2025-07-14 02:39:17 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=6.3599s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=710
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:39:17 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 6.360s, Memoria pico: 175.10MB, Llamadas: 710
backend   | 2025-07-14 02:39:17 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 6361.91ms)
backend   |       INFO   172.18.0.1:59066 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0905s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=281
backend   | 2025-07-14 02:39:17 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:39:17 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.090s, Memoria pico: 175.10MB, Llamadas: 281
backend   | 2025-07-14 02:39:59 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:39:59 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øY las fichas t√©cnicas de esas tejas?'
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0856s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=149
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:39:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.086s, Memoria pico: 175.10MB, Llamadas: 149
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:39:59.181667-05:00
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0844s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=405
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:39:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.10MB, Llamadas: 405
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (6 mensajes)
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0862s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=334
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:39:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.086s, Memoria pico: 175.10MB, Llamadas: 334
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0897s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=273
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:39:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.090s, Memoria pico: 175.10MB, Llamadas: 273
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (6 msgs)
backend   | 2025-07-14 02:39:59 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:39:59 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øY las fichas t√©cnicas de esas tejas?‚Ä¶'
backend   | 2025-07-14 02:39:59 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:40:01 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 3 herramienta(s) en paralelo...
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'Tejas de Policarbonato', 'query_type': 'general', 'n_docs': 3}
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'Tejas de PVC', 'query_type': 'general', 'n_docs': 3}
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'Tejas Termoac√∫sticas', 'query_type': 'general', 'n_docs': 3}
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'Tejas de Policarbonato' [type=general, n_docs=3]...
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'Tejas de Policarbonato...'
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=22)
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+49.08 en 49.08s)
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'Tejas de PVC' [type=general, n_docs=3]...
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'Tejas de PVC...'
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=12)
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 3.00
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'Tejas Termoac√∫sticas' [type=general, n_docs=3]...
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'Tejas Termoac√∫sticas...'
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=20)
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 2.00
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3631s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=4000
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.363s, Memoria pico: 175.10MB, Llamadas: 4000
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 3 vecinos m√°s cercanos.
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3685s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=3902
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.368s, Memoria pico: 175.10MB, Llamadas: 3902
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 3 vecinos m√°s cercanos.
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3740s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=10770
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:40:01 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.374s, Memoria pico: 175.10MB, Llamadas: 10770
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:40:01 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 3 vecinos m√°s cercanos.
backend   | 2025-07-14 02:40:02 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 3 resultados.
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['JfLh_N99XkoI_cgyIdTXRYnrmGx5qAb01-UkSD5_', 'YKWzCzlISPnPKRSK-8cpg68ipt8Bf7bxa42gPiId', 'pbk2CfuUO7g-vRANE9y7kWnX2pj_Os2jS69Rhjuw']...
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.9257s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=583
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:40:02 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.926s, Memoria pico: 175.10MB, Llamadas: 583
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'PRUEBAS DE LABORATORIO\nNTC 1088 Res...
backend   | 2025-07-14 02:40:02 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 3
backend   | 2025-07-14 02:40:02 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 3 resultados.
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['145D9cyoa5HUeTjEItGhdPA-H7a1ncR5Vw-fhzWP', 'ZUtUYDT2QjxBsmyulhQx65frrShi57sSkQHyhmpl', 'WAfUiGw_gl0D1Rhub9y0NhGCvdz7hserkJo4ao9z']...
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.9966s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=583
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:40:02 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.997s, Memoria pico: 175.10MB, Llamadas: 583
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'Las Tejas  ADRI  de Polipropileno co...
backend   | 2025-07-14 02:40:02 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 3
backend   | 2025-07-14 02:40:02 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 3 resultados.
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['6D-X4lH7ADmGcHDhU4agZVEwPTqQ2Hw85EVYQ7zr', 'ZUtUYDT2QjxBsmyulhQx65frrShi57sSkQHyhmpl', 'SPOPYWL-kEvIhLNgkCyDTnluEo5yJ6opmuPAx3Kn']...
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=1.0014s, cpu=0.00%, memoria_actual=175.10MB, memoria_pico=175.10MB, llamadas=583
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:40:02 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 1.001s, Memoria pico: 175.10MB, Llamadas: 583
backend   | 2025-07-14 02:40:02 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'Certificado N¬∞ SC 039-3\nMANUAL DE I...
backend   | 2025-07-14 02:40:02 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 3
backend   | 2025-07-14 02:40:02 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:40:13 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:40:13 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Aqu√≠ tienes un resumen de‚Ä¶'
backend   | 2025-07-14 02:40:13 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=14.7430s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.10MB, llamadas=362
backend   | 2025-07-14 02:40:13 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:40:13 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 14.743s, Memoria pico: 175.10MB, Llamadas: 362
backend   | 2025-07-14 02:40:13 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:40:13 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:40:13 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:40:13 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:40:13 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:40:13.924765-05:00
backend   | 2025-07-14 02:40:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0834s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:40:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:40:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:40:14 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:40:14.007952-05:00
backend   | 2025-07-14 02:40:14 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:40:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=14.9160s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.10MB, llamadas=710
backend   | 2025-07-14 02:40:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:40:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 14.916s, Memoria pico: 175.10MB, Llamadas: 710
backend   | 2025-07-14 02:40:14 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 14918.03ms)
backend   |       INFO   172.18.0.1:38604 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:40:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0913s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=285
backend   | 2025-07-14 02:40:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:40:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.091s, Memoria pico: 175.60MB, Llamadas: 285
backend   | 2025-07-14 02:41:03 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:41:03 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='Qu√© dimensiones tienen las l√°minas difusoras?'
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0976s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=153
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:41:03 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.098s, Memoria pico: 175.60MB, Llamadas: 153
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:41:03.774072-05:00
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0845s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:41:03 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (8 mensajes)
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0861s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:41:03 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0907s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=277
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:41:03 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.091s, Memoria pico: 175.60MB, Llamadas: 277
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (8 msgs)
backend   | 2025-07-14 02:41:03 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:41:03 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'Qu√© dimensiones tienen las l√°minas difusoras?‚Ä¶'
backend   | 2025-07-14 02:41:03 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:41:05 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:41:05 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:41:05 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'dimensiones l√°minas difusoras', 'query_type': 'general', 'n_docs': 3}
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'dimensiones l√°minas difusoras' [type=general, n_docs=3]...
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:41:05 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'dimensiones l√°minas difusoras...'
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=29)
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 2.00 ‚Üí 5.00 tokens (+64.07 en 64.07s)
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:41:05 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3838s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7926
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:41:05 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.384s, Memoria pico: 175.60MB, Llamadas: 7926
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:41:05 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 3 vecinos m√°s cercanos.
backend   | 2025-07-14 02:41:06 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 3 resultados.
backend   | 2025-07-14 02:41:06 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['fnGcPGYyFMpWnM0S9y7cgzgIciUdYIsTOy1gVOEQ', 'JNYbdfpWKomuO6dytK_oykXJn58Bi0Nh0psvnNDO', 'gDFwNAe5yIjLVQLkzIsEc8UAWthpoufNwlYdbhX-']...
backend   | 2025-07-14 02:41:06 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.9356s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:41:06 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:41:06 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.936s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:41:06 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'L√ÅMINA DE POLICARBONATO \nALVEOLAR G...
backend   | 2025-07-14 02:41:06 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 3
backend   | 2025-07-14 02:41:06 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:41:11 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:41:11 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Aqu√≠ tienes las dimension‚Ä¶'
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=7.3391s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:41:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 7.339s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:41:11.112666-05:00
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0833s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:41:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:41:11.195641-05:00
backend   | 2025-07-14 02:41:11 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=7.5233s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:41:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 7.523s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:41:11 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 7525.48ms)
backend   |       INFO   172.18.0.1:45320 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0898s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=289
backend   | 2025-07-14 02:41:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:41:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.090s, Memoria pico: 175.60MB, Llamadas: 289
backend   | 2025-07-14 02:41:53 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:41:53 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='En qu√© material est√° hecho el Ajoenchape?'
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0846s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=157
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:41:53 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 157
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:41:53.517347-05:00
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0840s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:41:53 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (10 mensajes)
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0857s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:41:53 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.1023s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=281
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:41:53 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.102s, Memoria pico: 175.60MB, Llamadas: 281
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (10 msgs)
backend   | 2025-07-14 02:41:53 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: technical
backend   | 2025-07-14 02:41:53 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'En qu√© material est√° hecho el Ajoenchape?‚Ä¶'
backend   | 2025-07-14 02:41:53 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:41:54 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:41:54 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:41:54 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'material del Ajoenchape', 'query_type': 'technical', 'n_docs': 1}
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'material del Ajoenchape' [type=technical, n_docs=1]...
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:41:54 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'material del Ajoenchape...'
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=23)
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+49.38 en 49.38s)
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:41:54 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:41:55 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:41:55 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3620s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7734
backend   | 2025-07-14 02:41:55 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:41:55 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.362s, Memoria pico: 175.60MB, Llamadas: 7734
backend   | 2025-07-14 02:41:55 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:41:55 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 1 vecinos m√°s cercanos.
backend   | 2025-07-14 02:41:55 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 1 resultados.
backend   | 2025-07-14 02:41:55 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['SPOPYWL-kEvIhLNgkCyDTnluEo5yJ6opmuPAx3Kn']...
backend   | 2025-07-14 02:41:55 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.9818s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:41:55 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:41:55 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.982s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:41:55 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'PERFIL AJOZINC L√ÅMINA \nESPECIFICACI...
backend   | 2025-07-14 02:41:55 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 1
backend   | 2025-07-14 02:41:55 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:41:56 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:41:56 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:41:56 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'ajoenchape material', 'query_type': 'technical', 'n_docs': 1}
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'ajoenchape material' [type=technical, n_docs=1]...
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:41:56 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'ajoenchape material...'
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=19)
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+1.59 en 1.59s)
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:41:56 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.1212s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=6723
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:41:56 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.121s, Memoria pico: 175.60MB, Llamadas: 6723
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 1 vecinos m√°s cercanos.
backend   | 2025-07-14 02:41:56 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 1 resultados.
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['JNYbdfpWKomuO6dytK_oykXJn58Bi0Nh0psvnNDO']...
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.2955s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:41:56 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.295s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:41:56 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'Nuestros productos cumplen con la le...
backend   | 2025-07-14 02:41:56 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 1
backend   | 2025-07-14 02:41:56 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:41:58 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:41:58 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. El **Ajoenchape** est√° fa‚Ä¶'
backend   | 2025-07-14 02:41:58 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=5.4619s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:41:58 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:41:58 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 5.462s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:41:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:41:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:41:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:41:58 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:41:58.979223-05:00
backend   | 2025-07-14 02:41:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0827s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:41:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:41:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:41:59 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:41:59.061597-05:00
backend   | 2025-07-14 02:41:59 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:41:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=5.6323s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:41:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:41:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 5.632s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:41:59 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 5634.56ms)
backend   |       INFO   172.18.0.1:49046 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:41:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0919s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=293
backend   | 2025-07-14 02:41:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:41:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.092s, Memoria pico: 175.60MB, Llamadas: 293
backend   | 2025-07-14 02:42:14 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:42:14 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øCu√°l es la distancia m√°xima entre apoyos que permite la teja de polipropileno?'
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0812s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=161
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:42:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.081s, Memoria pico: 175.60MB, Llamadas: 161
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:42:14.105429-05:00
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0838s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:42:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (12 mensajes)
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0852s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:42:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0888s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=285
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:42:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.089s, Memoria pico: 175.60MB, Llamadas: 285
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (12 msgs)
backend   | 2025-07-14 02:42:14 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:42:14 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øCu√°l es la distancia m√°xima entre apoyos que perm‚Ä¶'
backend   | 2025-07-14 02:42:14 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:42:15 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:42:15 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:42:15 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'distancia m√°xima entre apoyos teja de polipropileno', 'query_type': 'general', 'n_docs': 5}
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'distancia m√°xima entre apoyos teja de polipropileno' [type=general, n_docs=5]...
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:42:15 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'distancia m√°xima entre apoyos teja de polipropilen...'
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=51)
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+18.97 en 18.97s)
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:42:15 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3554s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7795
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:42:15 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.355s, Memoria pico: 175.60MB, Llamadas: 7795
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:42:15 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 5 vecinos m√°s cercanos.
backend   | 2025-07-14 02:42:16 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 5 resultados.
backend   | 2025-07-14 02:42:16 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['j1qe5rzu5m92sDtLfZacPwr__O0BXN_1LXBT4Dh5', 'B_qESQcm-AsvO7S6f5HvJn7zhHFJiDhXGxRcz-v6', '5KQ3Psgou339wJDIO1GKKD_o_5ob05ZAWNK4rt8g', 'pbk2CfuUO7g-vRANE9y7kWnX2pj_Os2jS69Rhjuw', 'JfLh_N99XkoI_cgyIdTXRYnrmGx5qAb01-UkSD5_']...
backend   | 2025-07-14 02:42:16 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.9685s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:42:16 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:42:16 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.968s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:42:16 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'C√≥digo\nUnidades\n Perfil Ajonit\nTr...
backend   | 2025-07-14 02:42:16 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 5
backend   | 2025-07-14 02:42:16 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:42:19 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:42:19 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. La **distancia m√°xima ent‚Ä¶'
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=5.6771s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:42:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 5.677s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:42:19.782609-05:00
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0838s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:42:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:42:19.866219-05:00
backend   | 2025-07-14 02:42:19 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=5.8453s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:42:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 5.845s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:42:19 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 5846.84ms)
backend   |       INFO   172.18.0.1:59338 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0897s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=297
backend   | 2025-07-14 02:42:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:42:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.090s, Memoria pico: 175.60MB, Llamadas: 297
backend   |       INFO   172.18.0.1:37206 - "OPTIONS /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:43:09 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:43:09 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øCu√°les tejas tienen resistencia UV?'
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.1311s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=165
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:43:09 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.131s, Memoria pico: 175.60MB, Llamadas: 165
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:43:09.652726-05:00
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0838s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:43:09 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (14 mensajes)
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0852s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:43:09 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.1327s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=296
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:43:09 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.133s, Memoria pico: 175.60MB, Llamadas: 296
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (14 msgs)
backend   | 2025-07-14 02:43:09 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:43:09 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øCu√°les tejas tienen resistencia UV?‚Ä¶'
backend   | 2025-07-14 02:43:09 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:43:15 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:43:15 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Ajover ofrece varias teja‚Ä¶'
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=5.3993s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:43:15 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 5.399s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:43:15.051803-05:00
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0843s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:43:15 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:43:15.136208-05:00
backend   | 2025-07-14 02:43:15 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=5.6186s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:43:15 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 5.619s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:43:15 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 5620.70ms)
backend   |       INFO   172.18.0.1:37206 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0888s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=301
backend   | 2025-07-14 02:43:15 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:43:15 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.089s, Memoria pico: 175.60MB, Llamadas: 301
backend   | 2025-07-14 02:44:04 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:44:04 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='La teja termoac√∫stica tiene filtro UV?'
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0839s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=169
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:44:04 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 169
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:04 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:44:04.958705-05:00
backend   | 2025-07-14 02:44:05 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0853s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:44:05 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:44:05 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:44:05 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (16 mensajes)
backend   | 2025-07-14 02:44:05 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0869s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:44:05 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:44:05 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.087s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:44:05 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0892s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=293
backend   | 2025-07-14 02:44:05 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:44:05 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.089s, Memoria pico: 175.60MB, Llamadas: 293
backend   | 2025-07-14 02:44:05 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (16 msgs)
backend   | 2025-07-14 02:44:05 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: technical
backend   | 2025-07-14 02:44:05 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'La teja termoac√∫stica tiene filtro UV?‚Ä¶'
backend   | 2025-07-14 02:44:05 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:44:07 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:44:07 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. S√≠, la **teja termoac√∫sti‚Ä¶'
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=2.4954s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:44:07 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 2.495s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:44:07.453553-05:00
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0833s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:44:07 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:44:07.536730-05:00
backend   | 2025-07-14 02:44:07 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=2.6664s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:44:07 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 2.666s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:44:07 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 2668.04ms)
backend   |       INFO   172.18.0.1:57950 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0930s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=295
backend   | 2025-07-14 02:44:07 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:44:07 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 295
backend   | 2025-07-14 02:44:19 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:44:19 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='La teja de policarbonato tiene filtro UV?'
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0836s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=173
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:44:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 173
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:44:19.480810-05:00
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0840s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:44:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (18 mensajes)
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0853s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:44:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0896s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=287
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:44:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.090s, Memoria pico: 175.60MB, Llamadas: 287
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (18 msgs)
backend   | 2025-07-14 02:44:19 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:44:19 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'La teja de policarbonato tiene filtro UV?‚Ä¶'
backend   | 2025-07-14 02:44:19 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:44:22 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:44:22 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. S√≠, la **teja de policarb‚Ä¶'
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=2.8852s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:44:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 2.885s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:44:22.366081-05:00
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0831s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:44:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:44:22.448789-05:00
backend   | 2025-07-14 02:44:22 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=3.0550s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:44:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 3.055s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:44:22 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 3056.75ms)
backend   |       INFO   172.18.0.1:57112 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0909s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=309
backend   | 2025-07-14 02:44:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:44:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.091s, Memoria pico: 175.60MB, Llamadas: 309
backend   | 2025-07-14 02:44:41 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:44:41 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='La teja de PVC tiene filtro UV?'
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0840s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=177
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:44:41 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 177
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:41 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:44:41.950556-05:00
backend   | 2025-07-14 02:44:42 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0842s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:44:42 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:44:42 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:44:42 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (20 mensajes)
backend   | 2025-07-14 02:44:42 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0858s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:44:42 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:44:42 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:44:42 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0905s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=308
backend   | 2025-07-14 02:44:42 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:44:42 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.091s, Memoria pico: 175.60MB, Llamadas: 308
backend   | 2025-07-14 02:44:42 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (20 msgs)
backend   | 2025-07-14 02:44:42 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:44:42 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'La teja de PVC tiene filtro UV?‚Ä¶'
backend   | 2025-07-14 02:44:42 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:44:44 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:44:44 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. S√≠, la **teja de PVC** de‚Ä¶'
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=2.9041s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:44:44 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 2.904s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:44:44.854229-05:00
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0827s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:44:44 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:44:44.936697-05:00
backend   | 2025-07-14 02:44:44 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=3.0749s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:44:44 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 3.075s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:44:44 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 3076.74ms)
backend   |       INFO   172.18.0.1:58992 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0921s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=313
backend   | 2025-07-14 02:44:44 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:44:44 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.092s, Memoria pico: 175.60MB, Llamadas: 313
backend   | 2025-07-14 02:45:06 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:45:06 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='La l√°mina de policarbonato alveolar tiene filtro UV?'
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0846s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=181
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:45:06 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 181
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:45:06.616896-05:00
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0834s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:45:06 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (22 mensajes)
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0849s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:45:06 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0915s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=305
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:45:06 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.092s, Memoria pico: 175.60MB, Llamadas: 305
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (22 msgs)
backend   | 2025-07-14 02:45:06 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: technical
backend   | 2025-07-14 02:45:06 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'La l√°mina de policarbonato alveolar tiene filtro U‚Ä¶'
backend   | 2025-07-14 02:45:06 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:45:11 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:45:11 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. S√≠, la **l√°mina de polica‚Ä¶'
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=4.9416s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:45:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 4.942s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:45:11.557892-05:00
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0824s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:45:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.082s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:45:11.640104-05:00
backend   | 2025-07-14 02:45:11 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=5.1124s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:45:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 5.112s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:45:11 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 5114.06ms)
backend   |       INFO   172.18.0.1:35494 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0918s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=317
backend   | 2025-07-14 02:45:11 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:45:11 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.092s, Memoria pico: 175.60MB, Llamadas: 317
backend   | 2025-07-14 02:45:35 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:45:35 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='Cu√°les son las recomendaciones de almacenamiento para los tanques de agua?'
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0841s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=185
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:45:35 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 185
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:45:35.616314-05:00
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0828s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:45:35 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (24 mensajes)
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0843s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:45:35 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0902s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=309
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:45:35 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.090s, Memoria pico: 175.60MB, Llamadas: 309
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (24 msgs)
backend   | 2025-07-14 02:45:35 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: technical
backend   | 2025-07-14 02:45:35 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'Cu√°les son las recomendaciones de almacenamiento p‚Ä¶'
backend   | 2025-07-14 02:45:35 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:45:40 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:45:40 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Aqu√≠ tienes las recomenda‚Ä¶'
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=4.8170s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:45:40 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 4.817s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:45:40.433255-05:00
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0827s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:45:40 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:45:40.515502-05:00
backend   | 2025-07-14 02:45:40 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=4.9872s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:45:40 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 4.987s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:45:40 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 4988.87ms)
backend   |       INFO   172.18.0.1:53158 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0912s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=321
backend   | 2025-07-14 02:45:40 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:45:40 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.091s, Memoria pico: 175.60MB, Llamadas: 321
backend   | 2025-07-14 02:45:57 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:45:57 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øCu√°l es la misi√≥n corporativa de ajover?'
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0847s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=189
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:45:57 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 189
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:45:57.688096-05:00
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0831s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:45:57 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (26 mensajes)
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0850s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:45:57 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0930s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=313
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:45:57 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 313
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (26 msgs)
backend   | 2025-07-14 02:45:57 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:45:57 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øCu√°l es la misi√≥n corporativa de ajover?‚Ä¶'
backend   | 2025-07-14 02:45:57 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:45:58 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:45:58 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:45:58 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_web_search con argumentos: {'query': 'misi√≥n corporativa de Ajover', 'query_type': 'general', 'n_docs': 3}
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:89 - üîµ [tool_web_search] Tool invocada. query='misi√≥n corporativa de Ajover', query_type='general', n_docs=3
backend   | 2025-07-14 02:45:58 | INFO     | backend.src.orchestrator.tools.web_content:tool_web_search:97 - üü¶ [tool_web_search] Ejecutando b√∫squeda web: 'misi√≥n corporativa de Ajover' [type=general, n_docs=3]...
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:45:58 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'misi√≥n corporativa de Ajover...'
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=28)
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+223.37 en 223.37s)
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:45:58 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3605s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7646
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:45:58 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.360s, Memoria pico: 175.60MB, Llamadas: 7646
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:45:58 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 3 vecinos m√°s cercanos.
backend   | 2025-07-14 02:45:59 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 3 resultados.
backend   | 2025-07-14 02:45:59 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['6ylgHsNQ8MKItkXlkcJibkREZ8GrJkJZdUgnvICn', 'g87KMUH4egrH8qySPQRATm1NovcVYATm3y9H2vTl', 'j1qe5rzu5m92sDtLfZacPwr__O0BXN_1LXBT4Dh5']...
backend   | 2025-07-14 02:45:59 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.9272s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:45:59 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:45:59 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.927s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:45:59 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:105 - üîµ [tool_web_search] Respuesta raw de SearchAI: [{'content': 'CARACTER√çSTICAS\n‚Ä¢  Permiten el paso...
backend   | 2025-07-14 02:45:59 | SUCCESS  | backend.src.orchestrator.tools.web_content:tool_web_search:109 - üü¶ [tool_web_search] B√∫squeda web completada. Documentos encontrados: 3
backend   | 2025-07-14 02:45:59 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:26 - üîµ [tool_web_search] Formateando resultados de b√∫squeda web.
backend   | 2025-07-14 02:45:59 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:47 - üîµ [tool_web_search] 3 documentos web formateados.
backend   | 2025-07-14 02:45:59 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:46:00 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:46:00 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Lamentablemente, no encon‚Ä¶'
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=2.9966s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:46:00 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 2.997s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:46:00.684491-05:00
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0829s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:46:00 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:46:00.766879-05:00
backend   | 2025-07-14 02:46:00 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=3.1681s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:46:00 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 3.168s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:46:00 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 3169.71ms)
backend   |       INFO   172.18.0.1:47458 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0928s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=325
backend   | 2025-07-14 02:46:00 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:46:00 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 325
backend   | 2025-07-14 02:46:20 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:46:20 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øCu√°l informaci√≥n de contacto tiene ajover en Colombia?'
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0847s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=193
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:46:20 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 193
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:46:20.558206-05:00
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0844s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:46:20 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (28 mensajes)
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0859s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:46:20 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0906s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=317
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:46:20 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.091s, Memoria pico: 175.60MB, Llamadas: 317
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (28 msgs)
backend   | 2025-07-14 02:46:20 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:46:20 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øCu√°l informaci√≥n de contacto tiene ajover en Colo‚Ä¶'
backend   | 2025-07-14 02:46:20 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:46:21 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:46:21 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:46:21 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_web_search con argumentos: {'query': 'informaci√≥n de contacto Ajover Colombia', 'query_type': 'general', 'n_docs': 4}
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:89 - üîµ [tool_web_search] Tool invocada. query='informaci√≥n de contacto Ajover Colombia', query_type='general', n_docs=4
backend   | 2025-07-14 02:46:21 | INFO     | backend.src.orchestrator.tools.web_content:tool_web_search:97 - üü¶ [tool_web_search] Ejecutando b√∫squeda web: 'informaci√≥n de contacto Ajover Colombia' [type=general, n_docs=4]...
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:46:21 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'informaci√≥n de contacto Ajover Colombia...'
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=39)
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+22.93 en 22.93s)
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:46:21 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3581s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7744
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:46:21 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.358s, Memoria pico: 175.60MB, Llamadas: 7744
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:46:21 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 4 vecinos m√°s cercanos.
backend   | 2025-07-14 02:46:22 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 4 resultados.
backend   | 2025-07-14 02:46:22 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['bKEVkmT-yLskP97LJ8As_q9hUh-dMIZR-KMQ3TNt', '6ylgHsNQ8MKItkXlkcJibkREZ8GrJkJZdUgnvICn', 'g87KMUH4egrH8qySPQRATm1NovcVYATm3y9H2vTl', 'j1qe5rzu5m92sDtLfZacPwr__O0BXN_1LXBT4Dh5']...
backend   | 2025-07-14 02:46:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.8947s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:46:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:46:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.895s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:46:22 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:105 - üîµ [tool_web_search] Respuesta raw de SearchAI: [{'content': 'CARRO CONTENEDOR \nRECTANGULAR \nMUL...
backend   | 2025-07-14 02:46:22 | SUCCESS  | backend.src.orchestrator.tools.web_content:tool_web_search:109 - üü¶ [tool_web_search] B√∫squeda web completada. Documentos encontrados: 4
backend   | 2025-07-14 02:46:22 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:26 - üîµ [tool_web_search] Formateando resultados de b√∫squeda web.
backend   | 2025-07-14 02:46:22 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:47 - üîµ [tool_web_search] 4 documentos web formateados.
backend   | 2025-07-14 02:46:22 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:46:24 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:46:24 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Aqu√≠ tienes la informaci√≥‚Ä¶'
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=4.3367s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:46:24 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 4.337s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:46:24.894984-05:00
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0832s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:46:24 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:46:24.977940-05:00
backend   | 2025-07-14 02:46:24 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=4.5082s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:46:24 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 4.508s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:46:24 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 4510.33ms)
backend   |       INFO   172.18.0.1:50672 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0906s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=329
backend   | 2025-07-14 02:46:24 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:46:24 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.091s, Memoria pico: 175.60MB, Llamadas: 329
backend   | 2025-07-14 02:47:25 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:47:25 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øAjover tiene tanques de 5000 litros?'
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0855s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=197
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:47:25 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 197
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:47:25.474156-05:00
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0836s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:47:25 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (30 mensajes)
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0852s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:47:25 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0954s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=328
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:47:25 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.095s, Memoria pico: 175.60MB, Llamadas: 328
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (30 msgs)
backend   | 2025-07-14 02:47:25 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:47:25 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øAjover tiene tanques de 5000 litros?‚Ä¶'
backend   | 2025-07-14 02:47:25 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:47:27 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:47:27 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:47:27 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'tanques de agua 5000 litros', 'query_type': 'general', 'n_docs': 3}
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'tanques de agua 5000 litros' [type=general, n_docs=3]...
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:47:27 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'tanques de agua 5000 litros...'
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=27)
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+65.57 en 65.57s)
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:47:27 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3604s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7690
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:47:27 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.360s, Memoria pico: 175.60MB, Llamadas: 7690
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:47:27 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 3 vecinos m√°s cercanos.
backend   | 2025-07-14 02:47:28 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 3 resultados.
backend   | 2025-07-14 02:47:28 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['v5QZIk_Ol9RP9SBlyt0ttyCJIH0_RLfWHaU4tpE5', 'LRCit1lSN61ZBYbOzt9ZpRcBje6aCnSI7e3Ahzmo', 'zpD0klGCy1EXqy6TpUF6oFeYwoc9HIHj_wjSc1OJ']...
backend   | 2025-07-14 02:47:28 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=1.2121s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:47:28 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:47:28 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 1.212s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:47:28 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'TANQUES MULTIUSOS\n\n\nTANQUES MULTI...
backend   | 2025-07-14 02:47:28 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 3
backend   | 2025-07-14 02:47:28 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:47:32 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:47:32 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. S√≠, Ajover ofrece **tanqu‚Ä¶'
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=6.7352s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:47:32 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 6.735s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:47:32.208838-05:00
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0818s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:47:32 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.082s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:47:32.290132-05:00
backend   | 2025-07-14 02:47:32 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=6.9060s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:47:32 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 6.906s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:47:32 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 6907.79ms)
backend   |       INFO   172.18.0.1:58124 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0920s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=333
backend   | 2025-07-14 02:47:32 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:47:32 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.092s, Memoria pico: 175.60MB, Llamadas: 333
backend   | 2025-07-14 02:48:20 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:48:20 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øEn qu√© colores vienen las cintas asf√°lticas?'
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0845s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=201
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:48:20 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 201
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:48:20.176985-05:00
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0838s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:48:20 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (32 mensajes)
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0853s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:48:20 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0926s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=315
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:48:20 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 315
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (32 msgs)
backend   | 2025-07-14 02:48:20 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:48:20 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øEn qu√© colores vienen las cintas asf√°lticas?‚Ä¶'
backend   | 2025-07-14 02:48:20 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:48:22 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:48:22 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Las **cintas asf√°lticas**‚Ä¶'
backend   | 2025-07-14 02:48:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=2.7957s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:48:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:48:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 2.796s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:48:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:48:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:48:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:48:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:48:22 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:48:22.972561-05:00
backend   | 2025-07-14 02:48:23 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0820s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:48:23 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:48:23 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.082s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:48:23 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:48:23.054452-05:00
backend   | 2025-07-14 02:48:23 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:48:23 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=2.9662s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:48:23 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:48:23 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 2.966s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:48:23 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 2968.31ms)
backend   |       INFO   172.18.0.1:33966 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:48:23 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0921s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=337
backend   | 2025-07-14 02:48:23 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:48:23 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.092s, Memoria pico: 175.60MB, Llamadas: 337
backend   | 2025-07-14 02:49:19 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:49:19 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øCu√°les son las dimensiones que maneja ajover en todas sus presentaciones de tejas?'
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0852s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=205
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:49:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 205
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:49:19.392465-05:00
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0839s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:49:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (34 mensajes)
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0859s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:49:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0998s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=329
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:49:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.100s, Memoria pico: 175.60MB, Llamadas: 329
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (34 msgs)
backend   | 2025-07-14 02:49:19 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:49:19 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øCu√°les son las dimensiones que maneja ajover en t‚Ä¶'
backend   | 2025-07-14 02:49:19 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:49:20 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:49:20 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:49:20 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'dimensiones de todas las presentaciones de tejas Ajover', 'query_type': 'general', 'n_docs': 4}
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'dimensiones de todas las presentaciones de tejas Ajover' [type=general, n_docs=4]...
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:49:20 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'dimensiones de todas las presentaciones de tejas A...'
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=55)
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+113.43 en 113.43s)
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:49:20 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3619s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7741
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:49:20 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.362s, Memoria pico: 175.60MB, Llamadas: 7741
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:49:20 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 4 vecinos m√°s cercanos.
backend   | 2025-07-14 02:49:21 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 4 resultados.
backend   | 2025-07-14 02:49:21 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['j1qe5rzu5m92sDtLfZacPwr__O0BXN_1LXBT4Dh5', '5KQ3Psgou339wJDIO1GKKD_o_5ob05ZAWNK4rt8g', 'SPOPYWL-kEvIhLNgkCyDTnluEo5yJ6opmuPAx3Kn', '6ylgHsNQ8MKItkXlkcJibkREZ8GrJkJZdUgnvICn']...
backend   | 2025-07-14 02:49:21 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.9710s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:49:21 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:49:21 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.971s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:49:21 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'C√≥digo\nUnidades\n Perfil Ajonit\nTr...
backend   | 2025-07-14 02:49:21 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 4
backend   | 2025-07-14 02:49:21 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:49:27 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:49:27 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Aqu√≠ tienes un resumen de‚Ä¶'
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=7.8709s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:49:27 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 7.871s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:49:27.263294-05:00
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0826s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:49:27 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:49:27.345657-05:00
backend   | 2025-07-14 02:49:27 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=8.0431s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:49:27 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 8.043s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:49:27 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 8044.87ms)
backend   |       INFO   172.18.0.1:34002 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0927s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=341
backend   | 2025-07-14 02:49:27 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:49:27 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 341
backend   | 2025-07-14 02:50:58 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:50:58 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øQu√© tan resistente son cada una de las tejas de ajover?'
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0852s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=199
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:50:58 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 199
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:50:58.573185-05:00
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0833s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:50:58 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (36 mensajes)
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0852s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:50:58 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0959s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=333
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:50:58 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.096s, Memoria pico: 175.60MB, Llamadas: 333
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (36 msgs)
backend   | 2025-07-14 02:50:58 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:50:58 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øQu√© tan resistente son cada una de las tejas de a‚Ä¶'
backend   | 2025-07-14 02:50:58 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:51:05 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:51:05 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Las tejas de Ajover est√°n‚Ä¶'
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=6.9160s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:51:05 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 6.916s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:51:05.488988-05:00
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0826s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:51:05 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:51:05.571423-05:00
backend   | 2025-07-14 02:51:05 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=7.0874s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:51:05 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 7.087s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:51:05 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 7089.46ms)
backend   |       INFO   172.18.0.1:51288 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0969s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=345
backend   | 2025-07-14 02:51:05 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:51:05 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.097s, Memoria pico: 175.60MB, Llamadas: 345
backend   | 2025-07-14 02:51:41 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:51:41 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='Cu√°l es la pendiente recomendada para la teja de polipropileno?'
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0850s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=213
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:51:41 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 213
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:51:41.168871-05:00
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0843s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:51:41 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (38 mensajes)
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0860s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:51:41 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0926s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=337
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:51:41 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 337
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (38 msgs)
backend   | 2025-07-14 02:51:41 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:51:41 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'Cu√°l es la pendiente recomendada para la teja de p‚Ä¶'
backend   | 2025-07-14 02:51:41 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:51:42 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:51:42 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:51:42 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_pdf_search con argumentos: {'query': 'pendiente recomendada para la teja de polipropileno', 'query_type': 'general', 'n_docs': 4}
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:82 - üü† [tool_pdf_search] Tool invocada (b√∫squeda PDF).
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:88 - üüß [tool_pdf_search] Ejecutando b√∫squeda PDF: 'pendiente recomendada para la teja de polipropileno' [type=general, n_docs=4]...
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:51:42 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'pendiente recomendada para la teja de polipropilen...'
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=51)
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+141.82 en 141.82s)
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:51:42 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3566s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7788
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:51:42 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.357s, Memoria pico: 175.60MB, Llamadas: 7788
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:51:42 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 4 vecinos m√°s cercanos.
backend   | 2025-07-14 02:51:43 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 4 resultados.
backend   | 2025-07-14 02:51:43 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['145D9cyoa5HUeTjEItGhdPA-H7a1ncR5Vw-fhzWP', 'j1qe5rzu5m92sDtLfZacPwr__O0BXN_1LXBT4Dh5', 'pbk2CfuUO7g-vRANE9y7kWnX2pj_Os2jS69Rhjuw', 'JfLh_N99XkoI_cgyIdTXRYnrmGx5qAb01-UkSD5_']...
backend   | 2025-07-14 02:51:43 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=1.1530s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:51:43 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:51:43 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 1.153s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:51:43 | DEBUG    | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:96 - üü† [tool_pdf_search] Respuesta raw de SearchAI: [{'content': 'Las Tejas  ADRI  de Polipropileno co...
backend   | 2025-07-14 02:51:43 | SUCCESS  | backend.src.orchestrator.tools.pdf_content:tool_pdf_search:100 - üüß [tool_pdf_search] B√∫squeda PDF completada. Documentos encontrados: 4
backend   | 2025-07-14 02:51:43 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:51:47 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:51:47 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. La **pendiente recomendad‚Ä¶'
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=6.1628s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:51:47 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 6.163s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:51:47.331618-05:00
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0828s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:51:47 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:51:47.414362-05:00
backend   | 2025-07-14 02:51:47 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=6.3352s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:51:47 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 6.335s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:51:47 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 6337.32ms)
backend   |       INFO   172.18.0.1:42700 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0928s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=356
backend   | 2025-07-14 02:51:47 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:51:47 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 356
backend   | 2025-07-14 02:52:34 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:52:34 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:52:34 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:52:34 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:52:34 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øPodr√≠as decirme cu√°l es la torniller√≠a para cada una de las tejas de ajover?'
backend   | 2025-07-14 02:52:34 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:52:34 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:52:34 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0857s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=217
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:52:35 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 217
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:52:35.081055-05:00
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0838s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:52:35 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (40 mensajes)
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0856s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:52:35 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0933s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=341
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:52:35 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 341
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (40 msgs)
backend   | 2025-07-14 02:52:35 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:52:35 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øPodr√≠as decirme cu√°l es la torniller√≠a para cada ‚Ä¶'
backend   | 2025-07-14 02:52:35 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:52:43 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:52:43 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Aqu√≠ tienes un resumen de‚Ä¶'
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=8.6220s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:52:43 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 8.622s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:52:43.703110-05:00
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0824s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:52:43 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.082s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:52:43.785186-05:00
backend   | 2025-07-14 02:52:43 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=8.7939s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:52:43 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 8.794s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:52:43 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 8795.86ms)
backend   |       INFO   172.18.0.1:48752 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0954s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=353
backend   | 2025-07-14 02:52:43 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:52:43 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.095s, Memoria pico: 175.60MB, Llamadas: 353
backend   |       INFO   172.18.0.1:55682 - "OPTIONS /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:53:19 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:53:19 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='Cu√°ntos a√±os de garant√≠a tiene la teja alveolar?'
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0858s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=221
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:53:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 221
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:53:19.442788-05:00
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0838s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:53:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (42 mensajes)
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0854s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:53:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0953s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=345
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:53:19 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.095s, Memoria pico: 175.60MB, Llamadas: 345
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (42 msgs)
backend   | 2025-07-14 02:53:19 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:53:19 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: 'Cu√°ntos a√±os de garant√≠a tiene la teja alveolar?‚Ä¶'
backend   | 2025-07-14 02:53:19 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:53:23 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:53:23 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. La **teja de policarbonat‚Ä¶'
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=3.9815s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:53:23 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 3.982s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:53:23.424250-05:00
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0825s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:53:23 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:53:23.506644-05:00
backend   | 2025-07-14 02:53:23 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=4.1531s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:53:23 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 4.153s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:53:23 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 4154.65ms)
backend   |       INFO   172.18.0.1:55682 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0953s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=357
backend   | 2025-07-14 02:53:23 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:53:23 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.095s, Memoria pico: 175.60MB, Llamadas: 357
backend   | 2025-07-14 02:54:22 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:54:22 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øLas tejas de ajover est√°n certificadas?'
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0866s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=215
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:54:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.087s, Memoria pico: 175.60MB, Llamadas: 215
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:54:22.791801-05:00
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0820s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:54:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.082s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (44 mensajes)
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0839s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:54:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0939s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=349
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:54:22 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.094s, Memoria pico: 175.60MB, Llamadas: 349
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (44 msgs)
backend   | 2025-07-14 02:54:22 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:54:22 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øLas tejas de ajover est√°n certificadas?‚Ä¶'
backend   | 2025-07-14 02:54:22 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:54:28 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:54:28 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. S√≠, las **tejas de Ajover‚Ä¶'
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=5.2927s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:54:28 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 5.293s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:54:28.083920-05:00
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0834s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:54:28 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:54:28.167474-05:00
backend   | 2025-07-14 02:54:28 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=5.4675s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:54:28 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 5.468s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:54:28 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 5469.55ms)
backend   |       INFO   172.18.0.1:55700 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0954s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=361
backend   | 2025-07-14 02:54:28 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:54:28 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.095s, Memoria pico: 175.60MB, Llamadas: 361
backend   | 2025-07-14 02:55:27 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:55:27 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øC√≥mo es la sostenibilidad con ajover?'
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0861s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=229
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:55:27 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 229
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:55:27.748813-05:00
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0827s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:55:27 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (46 mensajes)
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0845s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:55:27 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0951s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=353
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:55:27 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.095s, Memoria pico: 175.60MB, Llamadas: 353
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (46 msgs)
backend   | 2025-07-14 02:55:27 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: web
backend   | 2025-07-14 02:55:27 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øC√≥mo es la sostenibilidad con ajover?‚Ä¶'
backend   | 2025-07-14 02:55:27 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:55:36 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:55:36 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Ajover tiene un fuerte co‚Ä¶'
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=8.7335s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:55:36 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 8.734s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:55:36.481849-05:00
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0827s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:55:36 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:55:36.564125-05:00
backend   | 2025-07-14 02:55:36 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=8.9056s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:55:36 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 8.906s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:55:36 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 8907.26ms)
backend   |       INFO   172.18.0.1:35504 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0949s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=365
backend   | 2025-07-14 02:55:36 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:55:36 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.095s, Memoria pico: 175.60MB, Llamadas: 365
backend   | 2025-07-14 02:56:14 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:56:14 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øQu√© noticias hay de ajover?'
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0860s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=240
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:56:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.086s, Memoria pico: 175.60MB, Llamadas: 240
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:56:14.306175-05:00
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0823s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:56:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.082s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (48 mensajes)
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0838s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:56:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.084s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0981s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=357
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:56:14 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.098s, Memoria pico: 175.60MB, Llamadas: 357
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (48 msgs)
backend   | 2025-07-14 02:56:14 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: web
backend   | 2025-07-14 02:56:14 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øQu√© noticias hay de ajover?‚Ä¶'
backend   | 2025-07-14 02:56:14 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:56:15 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:56:15 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:56:15 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_web_search con argumentos: {'query': 'noticias de Ajover', 'query_type': 'web', 'n_docs': 1}
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:89 - üîµ [tool_web_search] Tool invocada. query='noticias de Ajover', query_type='web', n_docs=1
backend   | 2025-07-14 02:56:15 | INFO     | backend.src.orchestrator.tools.web_content:tool_web_search:97 - üü¶ [tool_web_search] Ejecutando b√∫squeda web: 'noticias de Ajover' [type=web, n_docs=1]...
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:56:15 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'noticias de Ajover...'
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=18)
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+273.49 en 273.49s)
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:56:15 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:56:16 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3630s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7789
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:56:16 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.363s, Memoria pico: 175.60MB, Llamadas: 7789
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 1 vecinos m√°s cercanos.
backend   | 2025-07-14 02:56:16 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 1 resultados.
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['j1qe5rzu5m92sDtLfZacPwr__O0BXN_1LXBT4Dh5']...
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=1.0984s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:56:16 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 1.098s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:105 - üîµ [tool_web_search] Respuesta raw de SearchAI: [{'content': 'C√≥digo\nUnidades\n Perfil Ajonit\nTr...
backend   | 2025-07-14 02:56:16 | SUCCESS  | backend.src.orchestrator.tools.web_content:tool_web_search:109 - üü¶ [tool_web_search] B√∫squeda web completada. Documentos encontrados: 1
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:26 - üîµ [tool_web_search] Formateando resultados de b√∫squeda web.
backend   | 2025-07-14 02:56:16 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:47 - üîµ [tool_web_search] 1 documentos web formateados.
backend   | 2025-07-14 02:56:16 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:56:18 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:56:18 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Lamentablemente, no encon‚Ä¶'
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=4.0239s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:56:18 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 4.024s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:56:18.330049-05:00
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0825s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:56:18 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.082s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:56:18.412185-05:00
backend   | 2025-07-14 02:56:18 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=4.1955s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:56:18 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 4.196s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:56:18 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 4197.41ms)
backend   |       INFO   172.18.0.1:41762 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0938s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=369
backend   | 2025-07-14 02:56:18 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:56:18 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.094s, Memoria pico: 175.60MB, Llamadas: 369
backend   | 2025-07-14 02:56:29 | INFO     | backend.src.core.policies:dispatch:58 - ‚ñ∂Ô∏è Solicitud recibida: POST /chat/query
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: process_user_query
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: process_user_query
backend   | 2025-07-14 02:56:29 | INFO     | backend.src.routers.chat:process_user_query:55 - üì© Recibida nueva consulta al chat.
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.routers.chat:process_user_query:56 - Payload recibido: session_id='sess_1f0df7a9accc42a9d3e3562946042976', query='¬øPodr√≠as validar correctamente?'
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.routers.chat:process_user_query:70 - Buscando sesi√≥n existente: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0834s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=237
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:56:29 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 237
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.routers.chat:process_user_query:86 - Invocando agente para sesi√≥n: sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: invoke_agent
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: invoke_agent
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: get_persistent_chat_history
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: get_persistent_chat_history
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:56:29.486246-05:00
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0830s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:56:29 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.083s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.orchestrator.settings.agent_factory:get_persistent_chat_history:149 - üìú Historial convertido (50 mensajes)
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [get_persistent_chat_history] M√©tricas recogidas: tiempo=0.0847s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=334
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/get_persistent_chat_history.json
backend   | 2025-07-14 02:56:29 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: get_persistent_chat_history. Tiempo: 0.085s, Memoria pico: 175.60MB, Llamadas: 334
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0926s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=361
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:56:29 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 361
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:199 - üìö Historial para grafo (50 msgs)
backend   | 2025-07-14 02:56:29 | DEBUG    | backend.src.orchestrator.settings.agent_factory:invoke_agent:203 - üìö Tipo de consulta: general
backend   | 2025-07-14 02:56:29 | INFO     | backend.src.orchestrator.settings.agent_factory:invoke_agent:220 - ‚ñ∂Ô∏è Invocando grafo con consulta: '¬øPodr√≠as validar correctamente?‚Ä¶'
backend   | 2025-07-14 02:56:29 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:56:30 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: S√≠
backend   | 2025-07-14 02:56:30 | INFO     | backend.src.orchestrator.settings.agent_settings:_tools_node:190 - üõ†Ô∏è Nodo Herramientas: Ejecutando 1 herramienta(s) en paralelo...
backend   | 2025-07-14 02:56:30 | INFO     | backend.src.orchestrator.settings.agent_settings:_run_one_tool:157 - -> Llamando a la herramienta: tool_web_search con argumentos: {'query': 'noticias recientes de Ajover', 'query_type': 'general', 'n_docs': 3}
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:89 - üîµ [tool_web_search] Tool invocada. query='noticias recientes de Ajover', query_type='general', n_docs=3
backend   | 2025-07-14 02:56:30 | INFO     | backend.src.orchestrator.tools.web_content:tool_web_search:97 - üü¶ [tool_web_search] Ejecutando b√∫squeda web: 'noticias recientes de Ajover' [type=general, n_docs=3]...
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: searchai_hybrid_search
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: searchai_hybrid_search
backend   | 2025-07-14 02:56:30 | INFO     | backend.src.infrastructure.searchai:hybrid_search:240 - üîéü§ñ Ejecutando b√∫squeda h√≠brida para consulta (primeros 50 caracteres): 'noticias recientes de Ajover...'
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:243 - Generando embedding para la consulta...
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: openai_get_text_embedding
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: openai_get_text_embedding
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.infrastructure.openai:get_text_embedding:281 - üìä Generando embedding para texto (len=28)
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.utils.time_utils:_refill_tokens:211 - üîÑ Bucket 'default' rellenado: 4.00 ‚Üí 5.00 tokens (+14.88 en 14.88s)
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.utils.time_utils:consume:194 - ü™£ Consumidos 1 tokens del bucket 'default'. Tokens restantes: 4.00
backend   | 2025-07-14 02:56:30 | DEBUG    | backend.src.infrastructure.openai:client:148 - üîç Accediendo a cliente de OpenAI
backend   | 2025-07-14 02:56:31 | INFO     | backend.src.infrastructure.openai:get_text_embedding:294 - ‚úÖ Embedding generado (dim=1536)
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [openai_get_text_embedding] M√©tricas recogidas: tiempo=0.3618s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=7778
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/openai_get_text_embedding.json
backend   | 2025-07-14 02:56:31 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: openai_get_text_embedding. Tiempo: 0.362s, Memoria pico: 175.60MB, Llamadas: 7778
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:245 - Embedding de consulta generado. Longitud: 1536.
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:252 - Configurando b√∫squeda vectorial con 3 vecinos m√°s cercanos.
backend   | 2025-07-14 02:56:31 | SUCCESS  | backend.src.infrastructure.searchai:hybrid_search:277 - üîç‚úÖ B√∫squeda h√≠brida completada. Se devolvieron 3 resultados.
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.infrastructure.searchai:hybrid_search:280 - IDs de resultados obtenidos: ['6ylgHsNQ8MKItkXlkcJibkREZ8GrJkJZdUgnvICn', 'g87KMUH4egrH8qySPQRATm1NovcVYATm3y9H2vTl', 'j1qe5rzu5m92sDtLfZacPwr__O0BXN_1LXBT4Dh5']...
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [searchai_hybrid_search] M√©tricas recogidas: tiempo=0.5788s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=583
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/searchai_hybrid_search.json
backend   | 2025-07-14 02:56:31 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: searchai_hybrid_search. Tiempo: 0.579s, Memoria pico: 175.60MB, Llamadas: 583
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.orchestrator.tools.web_content:tool_web_search:105 - üîµ [tool_web_search] Respuesta raw de SearchAI: [{'content': 'CARACTER√çSTICAS\n‚Ä¢  Permiten el paso...
backend   | 2025-07-14 02:56:31 | SUCCESS  | backend.src.orchestrator.tools.web_content:tool_web_search:109 - üü¶ [tool_web_search] B√∫squeda web completada. Documentos encontrados: 3
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:26 - üîµ [tool_web_search] Formateando resultados de b√∫squeda web.
backend   | 2025-07-14 02:56:31 | DEBUG    | backend.src.orchestrator.tools.web_content:_format_web_search_results:47 - üîµ [tool_web_search] 3 documentos web formateados.
backend   | 2025-07-14 02:56:31 | INFO     | backend.src.orchestrator.settings.agent_settings:_agent_node:116 - üß† Nodo Agente: Invocando al LLM...
backend   | 2025-07-14 02:56:32 | SUCCESS  | backend.src.orchestrator.settings.agent_settings:_agent_node:124 - ü§ñ LLM respondi√≥. ¬øLlamada a herramienta?: No
backend   | 2025-07-14 02:56:32 | SUCCESS  | backend.src.orchestrator.settings.agent_factory:invoke_agent:223 - ‚úîÔ∏è Respuesta generada: 'Gracias por tu consulta. Lamentablemente, no encon‚Ä¶'
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [invoke_agent] M√©tricas recogidas: tiempo=3.4216s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=362
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/invoke_agent.json
backend   | 2025-07-14 02:56:32 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: invoke_agent. Tiempo: 3.422s, Memoria pico: 175.60MB, Llamadas: 362
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_get_session
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:wrapped:317 - Llamada a funci√≥n async perfilada: cosmos_sessions_add_message
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:profile_async:138 - Profiling as√≠ncrono iniciado para: cosmos_sessions_add_message
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:56:32.908244-05:00
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_get_session] M√©tricas recogidas: tiempo=0.0821s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=405
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_get_session.json
backend   | 2025-07-14 02:56:32 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_get_session. Tiempo: 0.082s, Memoria pico: 175.60MB, Llamadas: 405
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.utils.time_utils:get_colombia_time:32 - üïê Hora Colombia obtenida: 2025-07-13T21:56:32.990202-05:00
backend   | 2025-07-14 02:56:32 | SUCCESS  | backend.src.routers.chat:process_user_query:112 - ‚úÖ Respuesta construida exitosamente para la sesi√≥n sess_1f0df7a9accc42a9d3e3562946042976
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [process_user_query] M√©tricas recogidas: tiempo=3.5911s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=710
backend   | 2025-07-14 02:56:32 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/process_user_query.json
backend   | 2025-07-14 02:56:32 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: process_user_query. Tiempo: 3.591s, Memoria pico: 175.60MB, Llamadas: 710
backend   | 2025-07-14 02:56:32 | INFO     | backend.src.core.policies:dispatch:65 - ‚óÄÔ∏è Respuesta enviada: 200 (tard√≥ 3593.15ms)
backend   |       INFO   172.18.0.1:59710 - "POST /chat/query HTTP/1.1" 200
backend   | 2025-07-14 02:56:33 | DEBUG    | backend.src.core.profiler:_collect_metrics:205 - [cosmos_sessions_add_message] M√©tricas recogidas: tiempo=0.0927s, cpu=0.00%, memoria_actual=175.60MB, memoria_pico=175.60MB, llamadas=373
backend   | 2025-07-14 02:56:33 | DEBUG    | backend.src.core.profiler:_write_json:231 - Archivo de m√©tricas guardado: performance/cosmos_sessions_add_message.json
backend   | 2025-07-14 02:56:33 | INFO     | backend.src.core.profiler:profile_async:166 - Profiling as√≠ncrono finalizado para: cosmos_sessions_add_message. Tiempo: 0.093s, Memoria pico: 175.60MB, Llamadas: 373
Gracefully stopping... (press Ctrl+C again to force)